;;; lupan-themes.el --- lupan's themes for Emacs  -*- lexical-binding: t -*-

;; Copyright (C) 2019-2020 Łukasz Pankowski

;; Author: Łukasz Pankowski <lukpank@o2.pl>
;; Version: 0.1.0
;; URL: https://github.com/lukpank/lupan-themes

;; This file is not part of GNU Emacs.

;; This program is free software: you can redistribute it and/or modify
;; it under the terms of the GNU General Public License as published by
;; the Free Software Foundation, either version 3 of the License, or
;; (at your option) any later version.

;; This program is distributed in the hope that it will be useful,
;; but WITHOUT ANY WARRANTY; without even the implied warranty of
;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;; GNU General Public License for more details.

;; You should have received a copy of the GNU General Public License
;; along with this program.  If not, see <https://www.gnu.org/licenses/>.

;;; Commentary:

;; A light and dark themes for Emacs using material design colors
;; and dark blue theme with my own selection of colors.

;;; Code:

(require 'color)

(defun lupan-themes-create-theme (theme)
  (let* ((c (lambda (dark light)
	      (if (eq theme 'lupan-material-light) light dark)))
	 (red-1-9 (funcall c "#ffcdd2" "#b71c1c"))
	 (red-2-6 (funcall c "#ef9a9a" "#e53935"))
	 (red-4 (funcall c "#ef5350" "#ef5350"))
	 (red-7-1 (funcall c "#d32f2f" "#ffcdd2"))
	 (red-9-0 (funcall c "#b71c1c" "#ffebee"))
	 (red-9-1 (funcall c "#b71c1c" "#ffcdd2"))
	 (pink-2-6 (funcall c "#f48fb1" "#d81b60"))
	 (purple-2-6 (funcall c "#ce93d8" "#8e24aa"))
	 (purple-4 (funcall c "#ab47bc" "#ab47bc"))
	 (indigo-2-6 (funcall c "#9fa8da" "#3949ab"))
	 (indigo-8-1 (funcall c "#283593" "#c5cae9"))
	 (blue-2-6 (funcall c "#90caf9" "#1e88e5"))
	 (blue-6-2 (funcall c "#1e88e5" "#90caf9"))
	 (cyan-2-6 (funcall c "#80deea" "#00acc1"))
	 (teal-2-6 (funcall c "#80cbc4" "#00897b"))
	 (teal-6-1 (funcall c "#00897b" "#b2dfdb"))
	 (green-1-9 (funcall c "#c8e6c9" "#1b5e20"))
	 (green-2-6 (funcall c "#a5d6a7" "#43a047"))
	 (green-7-1 (funcall c "#388e3c" "#c8e6c9"))
	 (green-9-0 (funcall c "#1b5e20" "#e8f5e9"))
	 (green-9-1 (funcall c "#1b5e20" "#c8e6c9"))
	 (light-green-2-6 (funcall c "#c5e1a5" "#7cb342"))
	 (lime-2-7 (funcall c "#e6ee9c" "#afb42b"))
	 (lime-4 (funcall c "#d4e157" "#d4e157"))
	 (lime-7-2 (funcall c "#afb42b" "#e6ee9c"))
	 (yellow-2-8 (funcall c "#fff59d" "#f9a825"))
	 (yellow-4 (funcall c "#ffee58" "#ffee58"))
	 (yellow-9 (funcall c "#f57f17" "#f57f17"))
	 (orange-2-6 (funcall c "#ffcc80" "#fb8c00"))
	 (orange-4-6 (funcall c "#ffa726" "#fb8c00"))
	 (orange-2-8 (funcall c "#ffcc80" "#ef6c00"))
	 (deep-orange-2-6 (funcall c "#ffab91" "#f4511e"))
	 (brown-2 (funcall c "#bcaaa4" "#bcaaa4"))
	 (brown-2-3 (funcall c "#bcaaa4" "#a1887f"))
	 (brown-2-6 (funcall c "#bcaaa4" "#6d4c41"))
	 (brown-4 (funcall c "#8d6e63" "#8d6e63"))
	 (grey-0 "#fafafa")
	 (grey-2-6 (funcall c "#eeeeee" "#757575"))
	 (grey-4-6 (funcall c "#bdbdbd" "#757575"))
	 (grey-5 "#9e9e9e")
	 (grey-6-4 (funcall c "#757575" "#bdbdbd"))
	 (grey-7-1 (funcall c "#616161" "#f5f5f5"))
	 (grey-8-1 (funcall c "#424242" "#f5f5f5"))
	 (grey-9 "#212121")
	 (grey-9-2 (funcall c "#212121" "#eeeeee"))
	 (blue-grey-2-4 (funcall c "#b0bec5" "#78909c"))
	 (blue-grey-2-6 (funcall c "#b0bec5" "#546e7a"))
	 (blue-grey-6-0 (funcall c "#546e7a" "#eceff1"))
	 (blue-grey-6-2 (funcall c "#546e7a" "#b0bec5"))
	 (blue-grey-7-1 (funcall c "#455a64" "#cfd8dc"))
	 (default-bg (funcall c "#424242" "#fafafa"))
	 (default-fg (funcall c "#eeeeee" "#424242"))
	 (bg-1 (funcall c "#4e4e4e" "#e2e2e2"))
	 (bg-2 (funcall c "#5b5b5b" "#d5d5d5"))
	 (bg-3 (funcall c "#676767" "#c9c9c9"))
	 (bg-4 (funcall c "#737373" "#bdbdbd"))
	 (bg-5 (funcall c "#7f7f7f" "#b1b1b1"))
	 (bg-6 (funcall c "#8c8c8c" "#a4a4a4")))
    (custom-theme-set-faces
     theme
     `(default ((t (:background ,default-bg :foreground ,default-fg))))
     `(fringe ((t (:background ,grey-9-2))))
     `(cursor ((t (:inverse-video t :background ,red-2-6))))
     `(bold ((t (:weight bold))))
     `(font-lock-keyword-face ((t (:foreground ,blue-2-6))))
     `(font-lock-function-name-face ((t (:foreground ,indigo-2-6))))
     `(font-lock-builtin-face ((t (:foreground ,cyan-2-6))))
     `(link ((t (:foreground ,cyan-2-6 :underline t))))
     `(link-visited ((t ( :foreground ,purple-2-6 :underline t))))
     `(font-lock-string-face ((t ( :foreground ,teal-2-6))))
     `(font-lock-constant-face ((t ( :foreground ,lime-2-7))))
     `(font-lock-variable-name-face ((t ( :foreground ,green-2-6))))
     `(font-lock-type-face ((t (:foreground ,light-green-2-6))))
     `(custom-state ((t (:foreground ,light-green-2-6))))
     `(font-lock-comment-face ((t ( :foreground ,blue-grey-2-6))))
     `(mode-line ((t (:background ,blue-grey-7-1 :foreground ,default-fg :box (:line-width -1 :style released-button)))))
     `(mode-line-inactive ((t (:background ,grey-6-4 :foreground ,default-fg :box (:line-width -1 :style released-button) :inherit (mode-line)))))
     `(minibuffer-prompt ((t (:foreground ,cyan-2-6))))
     `(region ((t (:background ,indigo-8-1 :extend t))))
     `(shadow ((t (:foreground ,grey-6-4))))
     `(highlight ((t (:background ,teal-6-1))))
     `(show-paren-match ((t (:background ,blue-6-2 :foreground ,default-fg))))
     `(gnus-group-mail-3 ((t (:foreground ,green-2-6 :weight bold))))
     `(gnus-group-mail-3-empty ((t (:foreground ,green-2-6))))
     `(gnus-summary-normal-ancient ((t (:foreground ,cyan-2-6))))
     `(gnus-summary-normal-read ((t (:foreground ,light-green-2-6))))
     `(gnus-summary-normal-ticked ((t (:foreground ,pink-2-6))))
     `(term-color-black ((t (:background ,grey-9 :foreground ,grey-9))))
     `(term-color-blue ((t (:background ,blue-2-6 :foreground ,blue-2-6))))
     `(term-color-cyan ((t (:background ,cyan-2-6 :foreground ,cyan-2-6))))
     `(term-color-green ((t (:background ,green-2-6 :foreground ,green-2-6))))
     `(term-color-magenta ((t (:background ,purple-2-6 :foreground ,purple-2-6))))
     `(term-color-red ((t (:background ,red-2-6 :foreground ,red-2-6))))
     `(term-color-white ((t (:background ,grey-0 :foreground ,grey-0))))
     `(term-color-yellow ((t (:background ,yellow-2-8 :foreground ,yellow-2-8))))
     `(header-line ((t (:foreground ,purple-2-6))))
     '(org-level-1 ((t (:height 1.3 :inherit (header-line)))))
     '(org-level-2 ((t (:height 1.2 :inherit (header-line)))))
     '(org-level-3 ((t (:height 1.1 :inherit (header-line)))))
     `(org-ellipsis ((t (:foreground ,yellow-9))))
     `(org-hide ((t (:foreground ,default-bg))))
     `(org-todo ((t (:foreground ,red-2-6 :weight bold))))
     `(org-done ((t (:foreground ,light-green-2-6 :weight bold))))
     `(info-menu-star ((t (:foreground ,red-2-6))))
     `(isearch ((t (:background ,yellow-4 :foreground ,grey-9))))
     `(isearch-fail ((t (:background ,red-2-6 :foreground ,red-9-0))))
     `(ido-only-match ((t (:foreground ,green-2-6))))
     `(ido-subdir ((t (:foreground ,blue-2-6 :weight bold))))
     `(lazy-highlight ((t (:background ,purple-4 :foreground ,grey-0))))
     `(helm-selection ((t (:background ,blue-grey-7-1))))
     `(helm-match ((t (:foreground ,red-2-6))))
     `(helm-separator ((t (:foreground ,red-2-6))))
     `(helm-candidate-number ((t (:background ,blue-grey-2-4 :foreground ,default-bg))))
     `(helm-source-header ((t (:background ,blue-grey-6-2 :foreground ,grey-2-6 :weight bold :height 1.3 :family "Sans Serif"))))
     `(helm-swoop-target-line-face ((t (:background ,yellow-4 :foreground ,grey-9))))
     `(helm-swoop-target-line-block-face ((t (:background ,lime-4 :foreground ,grey-9))))
     `(helm-swoop-target-word-face ((t (:background ,purple-4 :foreground ,grey-0))))
     `(helm-M-x-key ((t (:foreground ,orange-2-6))))
     `(helm-buffer-not-saved ((t (:foreground ,red-4))))
     `(helm-buffer-size ((t (:foreground ,brown-2-6))))
     `(helm-buffer-directory ((t (:foreground ,blue-2-6 :weight bold))))
     `(helm-buffer-process ((t (:foreground ,green-2-6))))
     `(helm-ff-directory ((t (:foreground ,blue-2-6 :weight bold))))
     `(helm-ff-dotted-directory ((t (:background ,grey-6-4 :foreground ,default-fg))))
     `(helm-ff-executable ((t (:foreground ,green-2-6))))
     `(helm-ff-invalid-symlink ((t (:background ,red-4 :foreground ,grey-9))))
     `(helm-ff-pipe ((t (:background ,grey-9 :foreground ,yellow-4))))
     `(helm-ff-socket ((t (:foreground ,purple-2-6))))
     `(helm-ff-suid ((t (:background ,red-4 :foreground ,grey-0))))
     `(helm-git-grep-match ((t (:foreground ,red-4))))
     `(helm-ls-git-added-copied-face ((t (:foreground ,light-green-2-6))))
     `(helm-ls-git-added-modified-face ((t (:foreground ,blue-2-6))))
     `(helm-ls-git-conflict-face ((t (:foreground ,purple-2-6))))
     `(helm-ls-git-deleted-and-staged-face ((t (:foreground ,grey-2-6))))
     `(helm-ls-git-deleted-not-staged-face ((t (:foreground ,brown-2-6))))
     `(helm-ls-git-modified-and-staged-face ((t (:foreground ,deep-orange-2-6))))
     `(helm-ls-git-modified-not-staged-face ((t (:foreground ,orange-2-6))))
     `(helm-ls-git-renamed-modified-face ((t (:foreground ,deep-orange-2-6))))
     `(helm-ls-git-untracked-face ((t (:foreground ,red-2-6))))
     `(helm-grep-file ((t (:foreground ,green-2-6 :weight bold))))
     `(helm-grep-lineno ((t (:foreground ,orange-2-6))))
     `(helm-rg-directory-header-face ((t (:foreground ,purple-2-6))))
     `(helm-rg-error-message ((t (:foreground ,red-2-6))))
     `(helm-rg-file-match-face ((t (:foreground ,green-2-6 :weight bold))))
     `(helm-rg-line-number-match-face ((t (:foreground ,orange-2-6))))
     `(helm-rg-active-arg-face ((t (:foreground ,light-green-2-6))))
     `(helm-rg-base-rg-cmd-face ((t (:foreground ,grey-5))))
     `(helm-rg-inactive-arg-face ((t (:foreground ,grey-5))))
     `(helm-rg-title-face ((t (:foreground ,purple-2-6))))
     `(helm-lisp-show-completion ((t (:background ,blue-grey-6-2))))
     `(dired-directory ((t (:foreground ,blue-2-6 :weight bold))))
     `(dired-special ((t (:background ,grey-9 :foreground ,yellow-4))))
     `(dired-symlink ((t (:foreground ,cyan-2-6))))
     `(dired-subtree-depth-1-face ((t (:background ,bg-1))))
     `(dired-subtree-depth-2-face ((t (:background ,bg-2))))
     `(dired-subtree-depth-3-face ((t (:background ,bg-3))))
     `(dired-subtree-depth-4-face ((t (:background ,bg-4))))
     `(dired-subtree-depth-5-face ((t (:background ,bg-5))))
     `(dired-subtree-depth-6-face ((t (:background ,bg-6))))
     `(diff-added ((t (:background ,green-9-0 :extend t))))
     `(diff-indicator-added ((t (:foreground ,green-2-6 :inherit (diff-added)))))
     `(diff-refine-added ((t (:background ,green-7-1))))
     `(diff-removed ((t (:background ,red-9-0 :extend t))))
     `(diff-indicator-removed ((t (:foreground ,red-2-6 :inherit (diff-removed)))))
     `(diff-refine-removed ((t (:background ,red-7-1))))
     `(smerge-base ((t (:background ,lime-7-2))))
     `(smerge-lower ((t (:background ,green-9-0))))
     `(smerge-markers ((t (:background ,grey-6-4))))
     `(smerge-refined-added ((t (:background ,green-7-1))))
     `(smerge-refined-removed ((t (:background ,red-7-1))))
     `(smerge-upper ((t (:background ,red-9-0))))
     `(magit-section-heading ((t (:foreground ,deep-orange-2-6))))
     `(magit-section ((t (:background ,grey-8-1))))
     `(magit-section-highlight ((t (:background ,blue-grey-7-1))))
     `(magit-diff-context-highlight ((t (:background ,blue-grey-6-0 :foreground ,blue-grey-2-6))))
     `(magit-diff-context ((t (:background ,grey-7-1 :foreground ,grey-4-6))))
     `(magit-diff-hunk-heading ((t (:background ,grey-8-1 :foreground ,grey-5))))
     `(magit-diff-hunk-heading-highlight ((t (:background ,blue-grey-7-1 :foreground ,blue-grey-2-6))))
     `(magit-diff-added ((t (:background ,green-9-0 :foreground ,green-2-6 :extend t))))
     `(magit-diff-removed ((t (:background ,red-9-0 :foreground ,red-2-6 :extend t))))
     `(magit-diff-added-highlight ((t (:background ,green-9-1 :foreground ,green-1-9 :extend t))))
     `(magit-diffstat-added ((t (:foreground ,green-2-6))))
     `(magit-diffstat-removed ((t (:foreground ,red-2-6))))
     `(magit-diff-removed-highlight ((t (:background ,red-9-1 :foreground ,red-1-9 :extend t))))
     `(magit-diff-lines-heading ((t (:background ,orange-4-6 :foreground ,grey-9))))
     '(magit-diff-whitespace-warning ((t (:inherit (trailing-whitespace)))))
     `(trailing-whitespace ((t (:background ,red-2-6))))
     `(magit-branch-local ((t (:foreground ,cyan-2-6))))
     '(magit-branch-current ((t (:box (:line-width 1 :color nil :style nil) :inherit (magit-branch-local)))))
     `(local-branch-remote ((t (:foreground ,green-2-6))))
     '(magit-branch-remote-head ((t (:box (:line-width 1 :color nil :style nil) :inherit (magit-branch-remote)))))
     `(magit-hash ((t (:foreground ,grey-4-6))))
     `(magit-log-author ((t (:foreground ,deep-orange-2-6))))
     `(magit-blame-highlight ((t (:background ,blue-grey-7-1 :foreground ,blue-grey-2-6))))
     `(magit-tag ((t (:foreground ,orange-2-6))))
     `(magit-bisect-bad ((t (:foreground ,red-4))))
     `(magit-bisect-good ((t (:foreground ,lime-2-7))))
     `(magit-bisect-skip ((t (:foreground ,brown-2-3))))
     `(magit-cherry-unmatched ((t (:foreground ,cyan-2-6))))
     `(magit-cherry-equivalent ((t (:foreground ,purple-2-6))))
     `(magit-reflog-amend ((t (:foreground ,purple-2-6))))
     `(magit-reflog-checkout ((t (:foreground ,blue-2-6))))
     `(magit-reflog-cherry-pick ((t (:foreground ,green-2-6))))
     `(magit-reflog-commit ((t (:foreground ,green-2-6))))
     `(magit-reflog-merge ((t (:foreground ,green-2-6))))
     `(magit-reflog-other ((t (:foreground ,cyan-2-6))))
     `(magit-reflog-rebase ((t (:foreground ,purple-2-6))))
     `(magit-reflog-remote ((t (:foreground ,cyan-2-6))))
     `(magit-reflog-reset ((t (:foreground ,red-2-6))))
     `(company-scrollbar-bg ((t (:background ,brown-2))))
     `(company-scrollbar-fg ((t (:background ,brown-4))))
     `(company-tooltip ((t (:background ,grey-9-2 :foreground ,default-fg))))
     `(company-tooltip-common ((t :foreground ,red-2-6)))
     '(company-tooltip-common-selection ((t (:inherit company-tooltip-common))))
     `(company-tooltip-annotation ((t (:foreground ,brown-2-6))))
     `(company-tooltip-selection ((t (:background ,blue-grey-7-1 :foreground ,default-fg))))
     `(avy-lead-face ((t (:background ,blue-grey-6-2 :foreground ,grey-2-6))))
     '(avy-lead-face-0 ((t (:inherit (avy-lead-face)))))
     '(avy-lead-face-1 ((t (:inherit (avy-lead-face)))))
     '(avy-lead-face-2 ((t (:inherit (avy-lead-face)))))
     '(aw-leading-char-face ((t (:height 2.0 :inherit (avy-lead-face)))))
     `(aw-background-face ((t (:foreground ,grey-6-4))))
     `(sh-heredoc ((t (:foreground ,yellow-2-8))))
     `(error ((t (:foreground ,red-4 :weight bold))))
     `(warning ((t (:foreground ,orange-2-6 :weight bold))))
     `(success ((t (:foreground ,green-2-6 :weight bold))))
     '(compilation-mode-line-exit ((t (:inherit (compilation-info)))))
     `(compilation-mode-line-run ((t (:foreground ,orange-2-8 :weight bold))))
     `(flymake-error ((((supports :underline (:style wave))) (:underline (:color ,red-4 :style wave))) (t (:inherit (error)))))
     `(flymake-warning ((((supports :underline (:style wave))) (:underline (:color ,cyan-2-6 :style wave))) (t (:inherit (warning)))))
     `(flycheck-error ((((supports :underline (:style wave))) (:underline (:color ,red-4 :style wave))) (t (:inherit (error) :underline (:color foreground-color :style line)))))
     `(flycheck-warning ((((supports :underline (:style wave))) (:underline (:color ,orange-2-6 :style wave))) (t (:inherit (warning) :underline (:color foreground-color :style line)))))
     `(flycheck-info ((((supports :underline (:style wave))) (:underline (:color ,green-2-6 :style wave))) (t (:inherit (success) :underline (:color foreground-color :style line))))))
    (custom-theme-set-variables
     theme
     `(ansi-color-names-vector [,grey-9 ,red-2-6 ,yellow-2-8 ,blue-2-6 ,purple-2-6 ,cyan-2-6 ,grey-0])
     `(rustic-ansi-faces [,grey-9 ,red-2-6 ,yellow-2-8 ,blue-2-6 ,purple-2-6 ,cyan-2-6 ,grey-0]))))

(defun lupan-themes-create-dark-gray-theme (theme)
  (let* ((hsl-to-hex (lambda (h s l) (apply #'color-rgb-to-hex (append (color-hsl-to-rgb h s l) '(2)))))
	 (normal (lambda (hue) (funcall hsl-to-hex hue 0.25 0.7)))
	 (dark1 (lambda (hue) (funcall hsl-to-hex hue 0.14 0.5)))
	 (dark2 (lambda (hue) (funcall hsl-to-hex hue 0.25 0.4)))
	 (dark3 (lambda (hue) (funcall hsl-to-hex hue 0.25 0.3)))
	 (dark1-grayish (lambda (hue) (funcall hsl-to-hex hue 0.07 0.5)))
	 (dark3-grayish (lambda (hue) (funcall hsl-to-hex hue 0.07 0.3)))
	 (black "#000000")
	 (bg (funcall dark3-grayish 0.58))
	 (fg "#e3e6e8")
	 (dark-gray "#404040")
	 (orange (funcall normal 0.1))
	 (yellow (funcall normal 0.17))
	 (green (funcall normal 0.33))
	 (cyan (funcall normal 0.5))
	 (blue (funcall normal 0.58))
	 (violet (funcall normal 0.69))
	 (magenta (funcall normal 0.83))
	 (red (funcall normal 1.0))
	 (dark1-yellow (funcall dark1 0.17))
	 (dark1-green (funcall dark1 0.33))
	 (dark1-violet (funcall dark1 0.69))
	 (dark1-red (funcall dark1 1.0))
	 (dark1-blue-gray (funcall dark1-grayish 0.58))
	 (dark1-violet-gray (funcall dark1-grayish 0.69))
	 (dark2-violet (funcall dark2 0.69))
	 (dark3-orange (funcall dark3 0.1))
	 (dark3-green (funcall dark3 0.33))
	 (dark3-violet (funcall dark3 0.69))
	 (dark3-magenta (funcall dark3 0.83))
	 (dark3-red (funcall dark3 1.0))
	 (dark3-green-gray (funcall dark3-grayish 0.33))
	 (dark3-violet-gray (funcall dark3-grayish 0.69))
	 (dark3-red-gray (funcall dark3-grayish 1.0)))
    (custom-theme-set-faces
     theme
     `(default ((t (:background ,bg :foreground ,fg))))
     `(fringe ((t (:background ,bg))))
     `(cursor ((t (:inverse-video t :background ,blue))))
     `(bold ((t (:weight bold))))
     `(font-lock-keyword-face ((t (:foreground ,cyan))))
     `(font-lock-function-name-face ((t (:foreground ,red))))
     `(font-lock-builtin-face ((t (:foreground ,magenta))))
     `(link ((t (:foreground ,blue :underline t))))
     `(link-visited ((t ( :foreground ,violet :underline t))))
     `(font-lock-string-face ((t ( :foreground ,violet))))
     `(font-lock-constant-face ((t ( :foreground ,orange))))
     `(font-lock-variable-name-face ((t ( :foreground ,green))))
     `(font-lock-type-face ((t (:foreground ,yellow))))
     `(custom-state ((t (:foreground ,green))))
     `(font-lock-comment-face ((t ( :foreground ,dark1-yellow))))
     `(mode-line ((t (:background ,dark3-violet :foreground ,violet :box (:line-width -1 :style released-button)))))
     `(mode-line-inactive ((t (:background ,dark3-violet-gray :foreground ,dark1-violet :box (:line-width -1 :style released-button) :inherit (mode-line)))))
     `(minibuffer-prompt ((t (:foreground ,blue))))
     `(region ((t (:background ,dark2-violet :extend t))))
     `(shadow ((t (:foreground ,dark1-violet))))
     `(highlight ((t (:background ,dark1-violet-gray))))
     `(show-paren-match ((t (:background ,magenta :foreground ,dark3-magenta))))
     `(gnus-group-mail-3 ((t (:foreground ,green :weight bold))))
     `(gnus-group-mail-3-empty ((t (:foreground ,green))))
     `(gnus-summary-normal-ancient ((t (:foreground ,cyan))))
     `(gnus-summary-normal-read ((t (:foreground ,green))))
     `(gnus-summary-normal-ticked ((t (:foreground ,magenta))))
     `(term-color-black ((t (:background ,black :foreground ,black))))
     `(term-color-blue ((t (:background ,blue :foreground ,blue))))
     `(term-color-cyan ((t (:background ,cyan :foreground ,cyan))))
     `(term-color-green ((t (:background ,green :foreground ,green))))
     `(term-color-magenta ((t (:background ,magenta :foreground ,magenta))))
     `(term-color-red ((t (:background ,red :foreground ,red))))
     `(term-color-white ((t (:background ,fg :foreground ,fg))))
     `(term-color-yellow ((t (:background ,yellow :foreground ,yellow))))
     `(header-line ((t (:foreground ,magenta))))
     '(org-level-1 ((t (:height 1.3 :inherit (header-line)))))
     '(org-level-2 ((t (:height 1.2 :inherit (header-line)))))
     '(org-level-3 ((t (:height 1.1 :inherit (header-line)))))
     `(org-ellipsis ((t (:foreground ,blue))))
     `(org-hide ((t (:foreground ,bg))))
     `(org-todo ((t (:foreground ,red :weight bold))))
     `(org-done ((t (:foreground ,green :weight bold))))
     `(info-menu-star ((t (:foreground ,red))))
     `(isearch ((t (:background ,yellow :foreground ,bg))))
     `(isearch-fail ((t (:background ,red :foreground ,bg))))
     `(ido-only-match ((t (:foreground ,green))))
     `(ido-subdir ((t (:foreground ,blue :weight bold))))
     `(lazy-highlight ((t (:background ,violet :foreground ,dark3-violet))))
     `(helm-selection ((t (:background ,dark3-violet))))
     `(helm-match ((t (:foreground ,yellow))))
     `(helm-separator ((t (:foreground ,red))))
     `(helm-candidate-number ((t (:background ,dark1-violet :foreground ,fg))))
     `(helm-source-header ((t (:weight bold :height 1.3 :family "Sans Serif"))))
     `(helm-swoop-target-line-face ((t (:background ,dark1-yellow :foreground ,fg))))
     `(helm-swoop-target-line-block-face ((t (:background ,dark1-yellow :foreground ,fg))))
     `(helm-swoop-target-word-face ((t (:background ,dark1-violet :foreground ,fg))))
     `(helm-M-x-key ((t (:foreground ,yellow))))
     `(helm-buffer-not-saved ((t (:foreground ,red :weight bold))))
     `(helm-buffer-size ((t (:foreground ,yellow))))
     `(helm-buffer-directory ((t (:foreground ,blue :weight bold))))
     `(helm-buffer-process ((t (:foreground ,green))))
     `(helm-ff-directory ((t (:foreground ,blue :weight bold))))
     `(helm-ff-dotted-directory ((t (:background ,dark1-blue-gray))))
     `(helm-ff-executable ((t (:foreground ,green))))
     `(helm-ff-invalid-symlink ((t (:background ,red :foreground ,dark3-red))))
     `(helm-ff-pipe ((t (:background ,black :foreground ,yellow))))
     `(helm-ff-socket ((t (:foreground ,violet))))
     `(helm-ff-suid ((t (:background ,dark1-red :foreground ,fg))))
     `(helm-git-grep-match ((t (:foreground ,red))))
     `(helm-ls-git-added-copied-face ((t (:foreground ,green))))
     `(helm-ls-git-added-modified-face ((t (:foreground ,blue))))
     `(helm-ls-git-conflict-face ((t (:foreground ,violet))))
     `(helm-ls-git-deleted-and-staged-face ((t (:foreground ,dark1-blue-gray))))
     `(helm-ls-git-deleted-not-staged-face ((t (:foreground ,dark3-red))))
     `(helm-ls-git-modified-and-staged-face ((t (:foreground ,dark3-orange))))
     `(helm-ls-git-modified-not-staged-face ((t (:foreground ,orange))))
     `(helm-ls-git-renamed-modified-face ((t (:foreground ,dark3-orange))))
     `(helm-ls-git-untracked-face ((t (:foreground ,red))))
     `(helm-grep-file ((t (:foreground ,green :weight bold))))
     `(helm-grep-lineno ((t (:foreground ,orange))))
     `(helm-rg-directory-header-face ((t (:foreground ,violet))))
     `(helm-rg-error-message ((t (:foreground ,red))))
     `(helm-rg-file-match-face ((t (:foreground ,green :weight bold))))
     `(helm-rg-line-number-match-face ((t (:foreground ,orange))))
     `(helm-rg-active-arg-face ((t (:foreground ,cyan))))
     `(helm-rg-base-rg-cmd-face ((t (:foreground ,blue))))
     `(helm-rg-inactive-arg-face ((t (:foreground ,dark1-blue-gray))))
     `(helm-rg-title-face ((t (:foreground ,violet))))
     `(helm-lisp-show-completion ((t (:background ,dark1-blue-gray))))
     `(dired-directory ((t (:foreground ,blue :weight bold))))
     `(dired-marked ((t (:foreground ,orange :weight bold))))
     `(dired-symlink ((t (:foreground ,cyan))))
     `(dired-subtree-depth-1-face ((t (:background ,dark-gray))))
     `(dired-subtree-depth-2-face ((t (:background ,dark3-violet-gray))))
     `(dired-subtree-depth-3-face ((t (:background ,bg))))
     `(dired-subtree-depth-4-face ((t (:background ,dark-gray))))
     `(dired-subtree-depth-5-face ((t (:background ,dark3-violet-gray))))
     `(dired-subtree-depth-6-face ((t (:background ,bg))))
     `(diff-added ((t (:background ,dark3-green :foreground ,green :extend t))))
     `(diff-indicator-added ((t (:foreground ,green :inherit (diff-added)))))
     `(diff-refine-added ((t (:background ,dark1-green))))
     `(diff-removed ((t (:background ,dark3-red :foreground ,red :extend t))))
     `(diff-indicator-removed ((t (:foreground ,red :inherit (diff-removed)))))
     `(diff-refine-removed ((t (:background ,dark1-red))))
     `(smerge-base ((t (:background "#f00"))))
     `(smerge-lower ((t (:background ,dark3-green :foreground ,green))))
     `(smerge-markers ((t (:background ,dark1-blue-gray))))
     `(smerge-refined-added ((t (:background  ,dark1-green))))
     `(smerge-refined-removed ((t (:background ,dark1-red))))
     `(smerge-upper ((t (:background ,dark3-red :foreground ,red))))
     `(magit-section-heading ((t (:foreground ,orange))))
     `(magit-section-highlight ((t (:background ,dark3-violet))))
     `(magit-diff-context-highlight ((t (:background ,dark2-violet :foreground ,violet))))
     `(magit-diff-context ((t (:background ,dark3-violet-gray :foreground ,dark1-violet))))
     `(magit-diff-hunk-heading ((t (:background ,dark-gray :foreground ,dark1-blue-gray))))
     `(magit-diff-hunk-heading-highlight ((t (:background ,dark3-violet :foreground ,dark1-violet))))
     `(magit-diff-added ((t (:background ,dark3-green-gray :foreground ,dark1-green :extend t))))
     `(magit-diff-removed ((t (:background ,dark3-red-gray :foreground ,dark1-red :extend t))))
     `(magit-diff-added-highlight ((t (:background ,dark3-green :foreground ,green :extend t))))
     `(magit-diff-removed-highlight ((t (:background ,dark3-red :foreground ,red :extend t))))
     `(magit-diffstat-added ((t (:foreground ,green))))
     `(magit-diffstat-removed ((t (:foreground ,red))))
     `(magit-diff-lines-heading ((t (:background ,orange :foreground ,dark3-orange))))
     '(magit-diff-whitespace-warning ((t (:inherit (trailing-whitespace)))))
     `(trailing-whitespace ((t (:background ,red))))
     `(magit-branch-local ((t (:foreground ,blue))))
     '(magit-branch-current ((t (:box (:line-width 1 :color nil :style nil) :inherit (magit-branch-local)))))
     `(local-branch-remote ((t (:foreground ,green))))
     '(magit-branch-remote-head ((t (:box (:line-width 1 :color nil :style nil) :inherit (magit-branch-remote)))))
     `(magit-hash ((t (:foreground ,magenta))))
     `(magit-log-author ((t (:foreground ,red))))
     `(magit-blame-highlight ((t (:background ,dark1-blue-gray :foreground ,orange))))
     `(magit-tag ((t (:foreground ,orange))))
     `(magit-bisect-bad ((t (:foreground ,red))))
     `(magit-bisect-good ((t (:foreground ,green))))
     `(magit-bisect-skip ((t (:foreground ,blue))))
     `(magit-cherry-unmatched ((t (:foreground ,cyan))))
     `(magit-cherry-equivalent ((t (:foreground ,violet))))
     `(magit-reflog-amend ((t (:foreground ,violet))))
     `(magit-reflog-checkout ((t (:foreground ,blue))))
     `(magit-reflog-cherry-pick ((t (:foreground ,green))))
     `(magit-reflog-commit ((t (:foreground ,green))))
     `(magit-reflog-merge ((t (:foreground ,green))))
     `(magit-reflog-other ((t (:foreground ,cyan))))
     `(magit-reflog-rebase ((t (:foreground ,violet))))
     `(magit-reflog-remote ((t (:foreground ,cyan))))
     `(magit-reflog-reset ((t (:foreground ,red))))
     `(company-scrollbar-bg ((t (:background ,dark1-blue-gray))))
     `(company-scrollbar-fg ((t (:background ,dark-gray))))
     `(company-tooltip ((t (:background ,dark1-violet-gray :foreground ,fg))))
     `(company-tooltip-common ((t :foreground ,yellow)))
     '(company-tooltip-common-selection ((t (:inherit company-tooltip-common))))
     `(company-tooltip-annotation ((t (:foreground ,violet))))
     `(company-tooltip-selection ((t (:background ,dark3-violet :foreground ,fg))))
     `(avy-lead-face ((t (:background ,dark3-violet :foreground ,violet))))
     '(avy-lead-face-0 ((t (:inherit (avy-lead-face)))))
     '(avy-lead-face-1 ((t (:inherit (avy-lead-face)))))
     '(avy-lead-face-2 ((t (:inherit (avy-lead-face)))))
     '(aw-leading-char-face ((t (:height 2.0 :inherit (avy-lead-face)))))
     `(aw-background-face ((t (:foreground ,dark1-blue-gray))))
     `(sh-heredoc ((t (:foreground ,yellow))))
     `(error ((t (:foreground ,red :weight bold))))
     `(warning ((t (:foreground ,orange :weight bold))))
     `(success ((t (:foreground ,green :weight bold))))
     '(compilation-mode-line-exit ((t (:inherit (compilation-info)))))
     `(compilation-mode-line-run ((t (:foreground ,magenta :weight bold))))
     `(flymake-error ((((supports :underline (:style wave))) (:underline (:color ,red :style wave))) (t (:inherit (error)))))
     `(flymake-warning ((((supports :underline (:style wave))) (:underline (:color ,cyan :style wave))) (t (:inherit (warning)))))
     `(flycheck-error ((((supports :underline (:style wave))) (:underline (:color ,red :style wave))) (t (:inherit (error) :underline (:color foreground-color :style line)))))
     `(flycheck-warning ((((supports :underline (:style wave))) (:underline (:color ,orange :style wave))) (t (:inherit (warning) :underline (:color foreground-color :style line)))))
     `(flycheck-info ((((supports :underline (:style wave))) (:underline (:color ,green :style wave))) (t (:inherit (success) :underline (:color foreground-color :style line)))))
     )
    (custom-theme-set-variables
     theme
     `(ansi-color-names-vector [,black ,red ,yellow ,blue ,magenta ,cyan ,fg])
     `(rustic-ansi-faces [,black ,red ,yellow ,blue ,magenta ,cyan ,fg]))))

(defun lupan-themes-create-dark-theme (theme)
  (let* ((hsl-to-hex (lambda (h s l) (apply #'color-rgb-to-hex (append (color-hsl-to-rgb h s l) '(2)))))
	 (normal (lambda (hue) (funcall hsl-to-hex hue 0.4 0.7)))
	 (dark1 (lambda (hue) (funcall hsl-to-hex hue 0.14 0.5)))
	 (dark2 (lambda (hue) (funcall hsl-to-hex hue 0.25 0.4)))
	 (dark3 (lambda (hue) (funcall hsl-to-hex hue 0.25 0.3)))
	 (dark1-grayish (lambda (hue) (funcall hsl-to-hex hue 0.07 0.5)))
	 (dark3-grayish (lambda (hue) (funcall hsl-to-hex hue 0.07 0.3)))
	 (black "#000000")
	 (bg (if (eq theme 'lupan-dark-blue) "#092e50" "#1a3a34"))
	 (fg (if (eq theme 'lupan-dark-blue) "#c7ccd1" "#c7d1cf"))
	 (dark-gray "#404040")
	 (orange (funcall normal 0.1))
	 (yellow (funcall normal 0.17))
	 (lime (funcall normal 0.24))
	 (green (funcall normal 0.33))
	 (cyan (funcall normal 0.5))
	 (blue (funcall normal 0.58))
	 (indigo (funcall normal 0.64))
	 (violet (funcall normal 0.69))
	 (magenta (funcall normal 0.83))
	 (red (funcall normal 1.0))
	 (dark1-yellow (funcall dark1 0.17))
	 (dark1-green (funcall dark1 0.33))
	 (dark1-cyan (funcall dark1 0.5))
	 (dark1-blue (funcall dark1 0.58))
	 (dark1-red (funcall dark1 1.0))
	 (dark1-blue-gray (funcall dark1-grayish 0.58))
	 (dark2-blue (funcall dark2 0.58))
	 (dark3-orange (funcall dark3 0.1))
	 (dark3-green (funcall dark3 0.33))
	 (dark3-blue (funcall dark3 0.58))
	 (dark3-magenta (funcall dark3 0.83))
	 (dark3-red (funcall dark3 1.0))
	 (dark3-green-gray (funcall dark3-grayish 0.33))
	 (dark3-blue-gray (funcall dark3-grayish 0.58))
	 (dark3-red-gray (funcall dark3-grayish 1.0)))
    (custom-theme-set-faces
     theme
     `(default ((t (:background ,bg :foreground ,fg))))
     `(fringe ((t (:background ,bg))))
     `(cursor ((t (:inverse-video t :background ,red))))
     `(bold ((t (:weight bold))))
     `(font-lock-keyword-face ((t (:foreground ,blue))))
     `(font-lock-function-name-face ((t (:foreground ,violet))))
     `(font-lock-builtin-face ((t (:foreground ,cyan))))
     `(link ((t (:foreground ,blue :underline t))))
     `(link-visited ((t ( :foreground ,violet :underline t))))
     `(font-lock-string-face ((t ( :foreground ,indigo))))
     `(font-lock-constant-face ((t ( :foreground ,yellow))))
     `(font-lock-variable-name-face ((t ( :foreground ,green))))
     `(font-lock-type-face ((t (:foreground ,lime))))
     `(custom-state ((t (:foreground ,green))))
     `(font-lock-comment-face ((t ( :foreground ,dark1-cyan))))
     `(mode-line ((t (:background ,dark3-blue :foreground ,blue :box (:line-width -1 :style released-button)))))
     `(mode-line-inactive ((t (:background ,dark3-blue-gray :foreground ,dark1-blue :box (:line-width -1 :style released-button) :inherit (mode-line)))))
     `(minibuffer-prompt ((t (:foreground ,blue))))
     `(region ((t (:background ,dark2-blue :extend t))))
     `(shadow ((t (:foreground ,dark1-blue))))
     `(highlight ((t (:background ,dark1-blue-gray))))
     `(show-paren-match ((t (:background ,blue :foreground ,dark3-blue))))
     `(gnus-group-mail-3 ((t (:foreground ,green :weight bold))))
     `(gnus-group-mail-3-empty ((t (:foreground ,green))))
     `(gnus-summary-normal-ancient ((t (:foreground ,cyan))))
     `(gnus-summary-normal-read ((t (:foreground ,green))))
     `(gnus-summary-normal-ticked ((t (:foreground ,magenta))))
     `(term-color-black ((t (:background ,black :foreground ,black))))
     `(term-color-blue ((t (:background ,blue :foreground ,blue))))
     `(term-color-cyan ((t (:background ,cyan :foreground ,cyan))))
     `(term-color-green ((t (:background ,green :foreground ,green))))
     `(term-color-magenta ((t (:background ,magenta :foreground ,magenta))))
     `(term-color-red ((t (:background ,red :foreground ,red))))
     `(term-color-white ((t (:background ,fg :foreground ,fg))))
     `(term-color-yellow ((t (:background ,yellow :foreground ,yellow))))
     `(header-line ((t (:foreground ,magenta))))
     '(org-level-1 ((t (:height 1.3 :inherit (header-line)))))
     '(org-level-2 ((t (:height 1.2 :inherit (header-line)))))
     '(org-level-3 ((t (:height 1.1 :inherit (header-line)))))
     `(org-ellipsis ((t (:foreground ,blue))))
     `(org-hide ((t (:foreground ,bg))))
     `(org-todo ((t (:foreground ,red :weight bold))))
     `(org-done ((t (:foreground ,green :weight bold))))
     `(info-menu-star ((t (:foreground ,red))))
     `(isearch ((t (:background ,yellow :foreground ,bg))))
     `(isearch-fail ((t (:background ,red :foreground ,bg))))
     `(ido-only-match ((t (:foreground ,green))))
     `(ido-subdir ((t (:foreground ,blue :weight bold))))
     `(lazy-highlight ((t (:background ,magenta :foreground ,dark3-magenta))))
     `(helm-selection ((t (:background ,dark3-blue))))
     `(helm-match ((t (:foreground ,yellow))))
     `(helm-separator ((t (:foreground ,red))))
     `(helm-candidate-number ((t (:background ,dark1-cyan :foreground ,fg))))
     `(helm-source-header ((t (:weight bold :height 1.3 :family "Sans Serif"))))
     `(helm-swoop-target-line-face ((t (:background ,dark1-yellow :foreground ,fg))))
     `(helm-swoop-target-line-block-face ((t (:background ,dark1-yellow :foreground ,fg))))
     `(helm-swoop-target-word-face ((t (:background ,magenta :foreground ,fg))))
     `(helm-M-x-key ((t (:foreground ,yellow))))
     `(helm-buffer-not-saved ((t (:foreground ,red :weight bold))))
     `(helm-buffer-size ((t (:foreground ,yellow))))
     `(helm-buffer-directory ((t (:foreground ,blue :weight bold))))
     `(helm-buffer-process ((t (:foreground ,green))))
     `(helm-ff-directory ((t (:foreground ,blue :weight bold))))
     `(helm-ff-dotted-directory ((t (:background ,dark1-blue-gray))))
     `(helm-ff-executable ((t (:foreground ,green))))
     `(helm-ff-invalid-symlink ((t (:background ,red :foreground ,dark3-red))))
     `(helm-ff-pipe ((t (:background ,black :foreground ,yellow))))
     `(helm-ff-socket ((t (:foreground ,violet))))
     `(helm-ff-suid ((t (:background ,dark1-red :foreground ,fg))))
     `(helm-git-grep-match ((t (:foreground ,red))))
     `(helm-ls-git-added-copied-face ((t (:foreground ,green))))
     `(helm-ls-git-added-modified-face ((t (:foreground ,blue))))
     `(helm-ls-git-conflict-face ((t (:foreground ,violet))))
     `(helm-ls-git-deleted-and-staged-face ((t (:foreground ,dark1-blue-gray))))
     `(helm-ls-git-deleted-not-staged-face ((t (:foreground ,dark3-red))))
     `(helm-ls-git-modified-and-staged-face ((t (:foreground ,dark3-orange))))
     `(helm-ls-git-modified-not-staged-face ((t (:foreground ,orange))))
     `(helm-ls-git-renamed-modified-face ((t (:foreground ,dark3-orange))))
     `(helm-ls-git-untracked-face ((t (:foreground ,red))))
     `(helm-grep-file ((t (:foreground ,green :weight bold))))
     `(helm-grep-lineno ((t (:foreground ,orange))))
     `(helm-rg-directory-header-face ((t (:foreground ,violet))))
     `(helm-rg-error-message ((t (:foreground ,red))))
     `(helm-rg-file-match-face ((t (:foreground ,green :weight bold))))
     `(helm-rg-line-number-match-face ((t (:foreground ,orange))))
     `(helm-rg-active-arg-face ((t (:foreground ,cyan))))
     `(helm-rg-base-rg-cmd-face ((t (:foreground ,blue))))
     `(helm-rg-inactive-arg-face ((t (:foreground ,dark1-blue-gray))))
     `(helm-rg-title-face ((t (:foreground ,violet))))
     `(helm-lisp-show-completion ((t (:background ,dark1-blue-gray))))
     `(dired-directory ((t (:foreground ,blue :weight bold))))
     `(dired-marked ((t (:foreground ,orange :weight bold))))
     `(dired-symlink ((t (:foreground ,cyan))))
     `(dired-subtree-depth-1-face ((t (:background ,dark-gray))))
     `(dired-subtree-depth-2-face ((t (:background ,dark3-blue-gray))))
     `(dired-subtree-depth-3-face ((t (:background ,bg))))
     `(dired-subtree-depth-4-face ((t (:background ,dark-gray))))
     `(dired-subtree-depth-5-face ((t (:background ,dark3-blue-gray))))
     `(dired-subtree-depth-6-face ((t (:background ,bg))))
     `(diff-added ((t (:background ,dark3-green :foreground ,green :extend t))))
     `(diff-indicator-added ((t (:foreground ,green :inherit (diff-added)))))
     `(diff-refine-added ((t (:background ,dark1-green))))
     `(diff-removed ((t (:background ,dark3-red :foreground ,red :extend t))))
     `(diff-indicator-removed ((t (:foreground ,red :inherit (diff-removed)))))
     `(diff-refine-removed ((t (:background ,dark1-red))))
     `(smerge-base ((t (:background ,dark3-blue))))
     `(smerge-lower ((t (:background ,dark3-green :foreground ,green))))
     `(smerge-markers ((t (:background ,dark1-blue-gray))))
     `(smerge-refined-added ((t (:background  ,dark1-green))))
     `(smerge-refined-removed ((t (:background ,dark1-red))))
     `(smerge-upper ((t (:background ,dark3-red :foreground ,red))))
     `(magit-section-heading ((t (:foreground ,orange))))
     `(magit-section-highlight ((t (:background ,dark3-blue))))
     `(magit-diff-context-highlight ((t (:background ,dark2-blue :foreground ,blue))))
     `(magit-diff-context ((t (:background ,dark3-blue-gray :foreground ,dark1-blue))))
     `(magit-diff-hunk-heading ((t (:background ,dark-gray :foreground ,dark1-blue-gray))))
     `(magit-diff-hunk-heading-highlight ((t (:background ,dark3-blue :foreground ,dark1-blue))))
     `(magit-diff-added ((t (:background ,dark3-green-gray :foreground ,dark1-green :extend t))))
     `(magit-diff-removed ((t (:background ,dark3-red-gray :foreground ,dark1-red :extend t))))
     `(magit-diff-added-highlight ((t (:background ,dark3-green :foreground ,green :extend t))))
     `(magit-diff-removed-highlight ((t (:background ,dark3-red :foreground ,red :extend t))))
     `(magit-diffstat-added ((t (:foreground ,green))))
     `(magit-diffstat-removed ((t (:foreground ,red))))
     `(magit-diff-lines-heading ((t (:background ,orange :foreground ,dark3-orange))))
     '(magit-diff-whitespace-warning ((t (:inherit (trailing-whitespace)))))
     `(trailing-whitespace ((t (:background ,red))))
     `(magit-branch-local ((t (:foreground ,blue))))
     '(magit-branch-current ((t (:box (:line-width 1 :color nil :style nil) :inherit (magit-branch-local)))))
     `(local-branch-remote ((t (:foreground ,green))))
     '(magit-branch-remote-head ((t (:box (:line-width 1 :color nil :style nil) :inherit (magit-branch-remote)))))
     `(magit-hash ((t (:foreground ,magenta))))
     `(magit-log-author ((t (:foreground ,red))))
     `(magit-blame-highlight ((t (:background ,dark1-blue-gray :foreground ,orange))))
     `(magit-tag ((t (:foreground ,orange))))
     `(magit-bisect-bad ((t (:foreground ,red))))
     `(magit-bisect-good ((t (:foreground ,green))))
     `(magit-bisect-skip ((t (:foreground ,blue))))
     `(magit-cherry-unmatched ((t (:foreground ,cyan))))
     `(magit-cherry-equivalent ((t (:foreground ,violet))))
     `(magit-reflog-amend ((t (:foreground ,violet))))
     `(magit-reflog-checkout ((t (:foreground ,blue))))
     `(magit-reflog-cherry-pick ((t (:foreground ,green))))
     `(magit-reflog-commit ((t (:foreground ,green))))
     `(magit-reflog-merge ((t (:foreground ,green))))
     `(magit-reflog-other ((t (:foreground ,cyan))))
     `(magit-reflog-rebase ((t (:foreground ,violet))))
     `(magit-reflog-remote ((t (:foreground ,cyan))))
     `(magit-reflog-reset ((t (:foreground ,red))))
     `(company-scrollbar-bg ((t (:background ,dark1-blue-gray))))
     `(company-scrollbar-fg ((t (:background ,dark-gray))))
     `(company-tooltip ((t (:background ,dark1-blue-gray :foreground ,fg))))
     `(company-tooltip-common ((t :foreground ,yellow)))
     '(company-tooltip-common-selection ((t (:inherit company-tooltip-common))))
     `(company-tooltip-annotation ((t (:foreground ,blue))))
     `(company-tooltip-selection ((t (:background ,dark3-blue :foreground ,fg))))
     `(avy-lead-face ((t (:background ,dark3-blue :foreground ,blue))))
     '(avy-lead-face-0 ((t (:inherit (avy-lead-face)))))
     '(avy-lead-face-1 ((t (:inherit (avy-lead-face)))))
     '(avy-lead-face-2 ((t (:inherit (avy-lead-face)))))
     '(aw-leading-char-face ((t (:height 2.0 :inherit (avy-lead-face)))))
     `(aw-background-face ((t (:foreground ,dark1-blue-gray))))
     `(sh-heredoc ((t (:foreground ,yellow))))
     `(error ((t (:foreground ,red :weight bold))))
     `(warning ((t (:foreground ,orange :weight bold))))
     `(success ((t (:foreground ,green :weight bold))))
     '(compilation-mode-line-exit ((t (:inherit (compilation-info)))))
     `(compilation-mode-line-run ((t (:foreground ,magenta :weight bold))))
     `(flymake-error ((((supports :underline (:style wave))) (:underline (:color ,red :style wave))) (t (:inherit (error)))))
     `(flymake-warning ((((supports :underline (:style wave))) (:underline (:color ,cyan :style wave))) (t (:inherit (warning)))))
     `(flycheck-error ((((supports :underline (:style wave))) (:underline (:color ,red :style wave))) (t (:inherit (error) :underline (:color foreground-color :style line)))))
     `(flycheck-warning ((((supports :underline (:style wave))) (:underline (:color ,orange :style wave))) (t (:inherit (warning) :underline (:color foreground-color :style line)))))
     `(flycheck-info ((((supports :underline (:style wave))) (:underline (:color ,green :style wave))) (t (:inherit (success) :underline (:color foreground-color :style line)))))
     )
    (custom-theme-set-variables
     theme
     `(ansi-color-names-vector [,black ,red ,yellow ,blue ,magenta ,cyan ,fg])
     `(rustic-ansi-faces [,black ,red ,yellow ,blue ,magenta ,cyan ,fg]))))

(defun lupan-themes-create-light-theme (theme)
  (let* ((hsl-to-hex (lambda (h s l) (apply #'color-rgb-to-hex (append (color-hsl-to-rgb h s l) '(2)))))
	 (normal (lambda (hue) (funcall hsl-to-hex hue 0.3 0.5)))
	 (light (lambda (hue) (funcall hsl-to-hex hue 0.4 0.8)))
	 (greish (lambda (hue) (funcall hsl-to-hex hue 0.07 0.5)))
	 (dark1 (lambda (hue) (funcall hsl-to-hex hue 0.14 0.5)))
	 (dark3 (lambda (hue) (funcall hsl-to-hex hue 0.25 0.3)))
	 (dark1-grayish (lambda (hue) (funcall hsl-to-hex hue 0.07 0.5)))
	 (black "#000000")
	 (bg "#f2f6e1")
	 (fg "#1a3a34")
	 (very-light-gray "#e0e0e0")
	 (light-gray "#c0c0c0")
	 (dark-gray "#808080")
	 (very-light-yellow "#f2f2d9")
	 (light-yellow (funcall light 0.17))
	 (light-green (funcall light 0.33))
	 (light-blue (funcall light 0.58))
	 (light-red (funcall light 1.0))
	 (green-gray (funcall greish 0.33))
	 (red-gray (funcall greish 1.0))
	 (orange (funcall normal 0.1))
	 (yellow (funcall normal 0.17))
	 (lime (funcall normal 0.24))
	 (green (funcall normal 0.33))
	 (cyan (funcall normal 0.5))
	 (blue (funcall normal 0.58))
	 (indigo (funcall normal 0.64))
	 (violet (funcall normal 0.69))
	 (magenta (funcall normal 0.83))
	 (red (funcall normal 1.0))
	 (blue-gray (funcall greish 0.58))
	 (dark1-green (funcall dark1 0.33))
	 (dark1-cyan (funcall dark1 0.5))
	 (dark1-red (funcall dark1 1.0))
	 (dark1-blue-gray (funcall dark1-grayish 0.58))
	 (dark3-orange (funcall dark3 0.1))
	 (dark3-magenta (funcall dark3 0.83))
	 (dark3-red (funcall dark3 1.0)))
    (custom-theme-set-faces
     theme
     `(default ((t (:background ,bg :foreground ,fg))))
     `(fringe ((t (:background ,bg))))
     `(cursor ((t (:inverse-video t :background ,red))))
     `(bold ((t (:weight bold))))
     `(font-lock-keyword-face ((t (:foreground ,blue))))
     `(font-lock-function-name-face ((t (:foreground ,orange))))
     `(font-lock-builtin-face ((t (:foreground ,cyan))))
     `(link ((t (:foreground ,blue :underline t))))
     `(link-visited ((t ( :foreground ,violet :underline t))))
     `(font-lock-string-face ((t ( :foreground ,indigo))))
     `(font-lock-constant-face ((t ( :foreground ,yellow))))
     `(font-lock-variable-name-face ((t ( :foreground ,green))))
     `(font-lock-type-face ((t (:foreground ,lime))))
     `(custom-state ((t (:foreground ,green))))
     `(font-lock-comment-face ((t ( :foreground ,dark1-cyan))))
     `(mode-line ((t (:background ,light-yellow :foreground ,fg :box (:line-width -1 :style released-button)))))
     `(mode-line-inactive ((t (:background ,blue-gray :foreground ,fg :box (:line-width -1 :style released-button) :inherit (mode-line)))))
     `(minibuffer-prompt ((t (:foreground ,blue))))
     `(region ((t (:background ,light-yellow :extend t))))
     `(shadow ((t (:foreground ,blue))))
     `(highlight ((t (:background ,light-yellow))))
     `(show-paren-match ((t (:background ,blue :foreground ,bg))))
     `(gnus-group-mail-3 ((t (:foreground ,green :weight bold))))
     `(gnus-group-mail-3-empty ((t (:foreground ,green))))
     `(gnus-summary-normal-ancient ((t (:foreground ,cyan))))
     `(gnus-summary-normal-read ((t (:foreground ,green))))
     `(gnus-summary-normal-ticked ((t (:foreground ,magenta))))
     `(term-color-black ((t (:background ,black :foreground ,black))))
     `(term-color-blue ((t (:background ,blue :foreground ,blue))))
     `(term-color-cyan ((t (:background ,cyan :foreground ,cyan))))
     `(term-color-green ((t (:background ,green :foreground ,green))))
     `(term-color-magenta ((t (:background ,magenta :foreground ,magenta))))
     `(term-color-red ((t (:background ,red :foreground ,red))))
     `(term-color-white ((t (:background ,fg :foreground ,fg))))
     `(term-color-yellow ((t (:background ,yellow :foreground ,yellow))))
     `(header-line ((t (:foreground ,magenta))))
     '(org-level-1 ((t (:height 1.3 :inherit (header-line)))))
     '(org-level-2 ((t (:height 1.2 :inherit (header-line)))))
     '(org-level-3 ((t (:height 1.1 :inherit (header-line)))))
     `(org-ellipsis ((t (:foreground ,blue))))
     `(org-hide ((t (:foreground ,bg))))
     `(org-todo ((t (:foreground ,red :weight bold))))
     `(org-done ((t (:foreground ,green :weight bold))))
     `(info-menu-star ((t (:foreground ,red))))
     `(isearch ((t (:background ,yellow :foreground ,bg))))
     `(isearch-fail ((t (:background ,red :foreground ,bg))))
     `(ido-only-match ((t (:foreground ,green))))
     `(ido-subdir ((t (:foreground ,blue :weight bold))))
     `(lazy-highlight ((t (:background ,magenta :foreground ,dark3-magenta))))
     `(helm-selection ((t (:background ,light-yellow))))
     `(helm-match ((t (:foreground ,yellow))))
     `(helm-separator ((t (:foreground ,red))))
     `(helm-candidate-number ((t (:background ,yellow :foreground ,fg))))
     `(helm-source-header ((t (:weight bold :height 1.3 :family "Sans Serif"))))
     `(helm-swoop-target-line-face ((t (:background ,yellow :foreground ,fg))))
     `(helm-swoop-target-line-block-face ((t (:background ,yellow :foreground ,fg))))
     `(helm-swoop-target-word-face ((t (:background ,magenta :foreground ,dark3-magenta))))
     `(helm-M-x-key ((t (:foreground ,yellow))))
     `(helm-buffer-not-saved ((t (:foreground ,red :weight bold))))
     `(helm-buffer-size ((t (:foreground ,yellow))))
     `(helm-buffer-directory ((t (:foreground ,blue :weight bold))))
     `(helm-buffer-process ((t (:foreground ,green))))
     `(helm-ff-directory ((t (:foreground ,blue :weight bold))))
     `(helm-ff-dotted-directory ((t (:background ,light-gray))))
     `(helm-ff-executable ((t (:foreground ,green))))
     `(helm-ff-invalid-symlink ((t (:background ,red :foreground ,dark3-red))))
     `(helm-ff-pipe ((t (:background ,black :foreground ,yellow))))
     `(helm-ff-socket ((t (:foreground ,violet))))
     `(helm-ff-suid ((t (:background ,dark1-red :foreground ,fg))))
     `(helm-git-grep-match ((t (:foreground ,red))))
     `(helm-ls-git-added-copied-face ((t (:foreground ,green))))
     `(helm-ls-git-added-modified-face ((t (:foreground ,blue))))
     `(helm-ls-git-conflict-face ((t (:foreground ,violet))))
     `(helm-ls-git-deleted-and-staged-face ((t (:foreground ,dark1-blue-gray))))
     `(helm-ls-git-deleted-not-staged-face ((t (:foreground ,red))))
     `(helm-ls-git-modified-and-staged-face ((t (:foreground ,orange))))
     `(helm-ls-git-modified-not-staged-face ((t (:foreground ,orange))))
     `(helm-ls-git-renamed-modified-face ((t (:foreground ,orange))))
     `(helm-ls-git-untracked-face ((t (:foreground ,red))))
     `(helm-grep-file ((t (:foreground ,green :weight bold))))
     `(helm-grep-lineno ((t (:foreground ,orange))))
     `(helm-rg-directory-header-face ((t (:foreground ,violet))))
     `(helm-rg-error-message ((t (:foreground ,red))))
     `(helm-rg-file-match-face ((t (:foreground ,green :weight bold))))
     `(helm-rg-line-number-match-face ((t (:foreground ,orange))))
     `(helm-rg-active-arg-face ((t (:foreground ,cyan))))
     `(helm-rg-base-rg-cmd-face ((t (:foreground ,blue))))
     `(helm-rg-inactive-arg-face ((t (:foreground ,dark1-blue-gray))))
     `(helm-rg-title-face ((t (:foreground ,violet))))
     `(helm-lisp-show-completion ((t (:background ,light-gray))))
     `(dired-directory ((t (:foreground ,blue :weight bold))))
     `(dired-marked ((t (:foreground ,orange :weight bold))))
     `(dired-symlink ((t (:foreground ,cyan))))
     `(dired-subtree-depth-1-face ((t (:background ,light-gray))))
     `(dired-subtree-depth-2-face ((t (:background ,light-yellow))))
     `(dired-subtree-depth-3-face ((t (:background ,bg))))
     `(dired-subtree-depth-4-face ((t (:background ,light-gray))))
     `(dired-subtree-depth-5-face ((t (:background ,light-yellow))))
     `(dired-subtree-depth-6-face ((t (:background ,bg))))
     `(diff-added ((t (:background ,light-green :foreground ,green :extend t))))
     `(diff-indicator-added ((t (:foreground ,light-green :inherit (diff-added)))))
     `(diff-refine-added ((t (:background ,dark1-green :foreground ,light-green))))
     `(diff-removed ((t (:background ,light-red :foreground ,red :extend t))))
     `(diff-indicator-removed ((t (:foreground ,red :inherit (diff-removed)))))
     `(diff-refine-removed ((t (:background ,dark1-red :foreground ,light-red))))
     `(smerge-base ((t (:background ,light-blue))))
     `(smerge-lower ((t (:background ,light-green :foreground ,green))))
     `(smerge-markers ((t (:background ,light-gray))))
     `(smerge-refined-added ((t (:background ,dark1-green :foreground ,light-green))))
     `(smerge-refined-removed ((t (:background ,dark1-red :foreground ,light-red))))
     `(smerge-upper ((t (:background ,light-red :foreground ,red))))
     `(magit-section-heading ((t (:foreground ,orange))))
     `(magit-section-highlight ((t (:background ,light-yellow))))
     `(magit-diff-context-highlight ((t (:background ,very-light-yellow :foreground ,yellow))))
     `(magit-diff-context ((t (:background ,very-light-gray :foreground ,dark-gray))))
     `(magit-diff-hunk-heading ((t (:background ,light-gray :foreground ,dark-gray))))
     `(magit-diff-hunk-heading-highlight ((t (:background ,light-yellow :foreground ,dark-gray))))
     `(magit-diff-added ((t (:background ,green-gray :foreground ,light-green :extend t))))
     `(magit-diff-removed ((t (:background ,red-gray :foreground ,light-red :extend t))))
     `(magit-diff-added-highlight ((t (:background ,light-green :foreground ,green :extend t))))
     `(magit-diff-removed-highlight ((t (:background ,light-red :foreground ,red :extend t))))
     `(magit-diffstat-added ((t (:foreground ,green))))
     `(magit-diffstat-removed ((t (:foreground ,red))))
     `(magit-diff-lines-heading ((t (:background ,orange :foreground ,dark3-orange))))
     '(magit-diff-whitespace-warning ((t (:inherit (trailing-whitespace)))))
     `(trailing-whitespace ((t (:background ,red))))
     `(magit-branch-local ((t (:foreground ,blue))))
     '(magit-branch-current ((t (:box (:line-width 1 :color nil :style nil) :inherit (magit-branch-local)))))
     `(local-branch-remote ((t (:foreground ,green))))
     '(magit-branch-remote-head ((t (:box (:line-width 1 :color nil :style nil) :inherit (magit-branch-remote)))))
     `(magit-hash ((t (:foreground ,magenta))))
     `(magit-log-author ((t (:foreground ,red))))
     `(magit-blame-highlight ((t (:background ,light-yellow :foreground ,yellow))))
     `(magit-tag ((t (:foreground ,orange))))
     `(magit-bisect-bad ((t (:foreground ,red))))
     `(magit-bisect-good ((t (:foreground ,green))))
     `(magit-bisect-skip ((t (:foreground ,blue))))
     `(magit-cherry-unmatched ((t (:foreground ,cyan))))
     `(magit-cherry-equivalent ((t (:foreground ,violet))))
     `(magit-reflog-amend ((t (:foreground ,violet))))
     `(magit-reflog-checkout ((t (:foreground ,blue))))
     `(magit-reflog-cherry-pick ((t (:foreground ,green))))
     `(magit-reflog-commit ((t (:foreground ,green))))
     `(magit-reflog-merge ((t (:foreground ,green))))
     `(magit-reflog-other ((t (:foreground ,cyan))))
     `(magit-reflog-rebase ((t (:foreground ,violet))))
     `(magit-reflog-remote ((t (:foreground ,cyan))))
     `(magit-reflog-reset ((t (:foreground ,red))))
     `(company-scrollbar-bg ((t (:background ,dark-gray))))
     `(company-scrollbar-fg ((t (:background ,orange))))
     `(company-tooltip ((t (:background ,very-light-yellow :foreground ,fg))))
     `(company-tooltip-common ((t :foreground ,yellow)))
     '(company-tooltip-common-selection ((t (:inherit company-tooltip-common))))
     `(company-tooltip-annotation ((t (:foreground ,orange))))
     `(company-tooltip-selection ((t (:background ,light-yellow :foreground ,fg))))
     `(avy-lead-face ((t (:background ,light-yellow :foreground ,yellow))))
     '(avy-lead-face-0 ((t (:inherit (avy-lead-face)))))
     '(avy-lead-face-1 ((t (:inherit (avy-lead-face)))))
     '(avy-lead-face-2 ((t (:inherit (avy-lead-face)))))
     '(aw-leading-char-face ((t (:height 2.0 :inherit (avy-lead-face)))))
     `(aw-background-face ((t (:foreground ,dark1-blue-gray))))
     `(sh-heredoc ((t (:foreground ,yellow))))
     `(error ((t (:foreground ,red :weight bold))))
     `(warning ((t (:foreground ,orange :weight bold))))
     `(success ((t (:foreground ,green :weight bold))))
     '(compilation-mode-line-exit ((t (:inherit (compilation-info)))))
     `(compilation-mode-line-run ((t (:foreground ,magenta :weight bold))))
     `(flymake-error ((((supports :underline (:style wave))) (:underline (:color ,red :style wave))) (t (:inherit (error)))))
     `(flymake-warning ((((supports :underline (:style wave))) (:underline (:color ,cyan :style wave))) (t (:inherit (warning)))))
     `(flycheck-error ((((supports :underline (:style wave))) (:underline (:color ,red :style wave))) (t (:inherit (error) :underline (:color foreground-color :style line)))))
     `(flycheck-warning ((((supports :underline (:style wave))) (:underline (:color ,orange :style wave))) (t (:inherit (warning) :underline (:color foreground-color :style line)))))
     `(flycheck-info ((((supports :underline (:style wave))) (:underline (:color ,green :style wave))) (t (:inherit (success) :underline (:color foreground-color :style line)))))
     )
    (custom-theme-set-variables
     theme
     `(ansi-color-names-vector [,black ,red ,yellow ,blue ,magenta ,cyan ,fg])
     `(rustic-ansi-faces [,black ,red ,yellow ,blue ,magenta ,cyan ,fg]))))

;;;###autoload
(and load-file-name
     (boundp 'custom-theme-load-path)
     (add-to-list 'custom-theme-load-path
		  (file-name-as-directory (file-name-directory load-file-name))))

(provide 'lupan-themes)
